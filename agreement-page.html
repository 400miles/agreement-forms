<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agreement Signing</title>
<style>
    .agreement-form {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        font-family: 'Helvetica Neue', Arial, sans-serif;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .agreement-header {
        text-align: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #e1e1e1;
    }
    
    .agreement-id {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 5px;
        font-family: monospace;
        font-weight: bold;
        color: #2c5aa0;
        margin: 10px 0;
    }
    
    .form-section {
        margin-bottom: 25px;
        padding: 15px;
        border: 1px solid #e1e1e1;
        border-radius: 5px;
    }
    
    .form-section h3 {
        margin-top: 0;
        color: #333;
        border-bottom: 1px solid #ddd;
        padding-bottom: 8px;
    }
    
    .form-group {
        margin-bottom: 15px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
        color: #555;
    }
    
    .required {
        color: #d32f2f;
    }
    
    .form-control {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        box-sizing: border-box;
    }
    
    .form-control:focus {
        border-color: #2c5aa0;
        outline: none;
        box-shadow: 0 0 5px rgba(44, 90, 160, 0.3);
    }
    
    .error {
        border-color: #d32f2f !important;
        background-color: #ffebee;
    }
    
    .error-message {
        color: #d32f2f;
        font-size: 12px;
        margin-top: 5px;
        display: none;
    }
    
    .warning-message {
        background-color: #fff3cd;
        border: 1px solid #ffc107;
        color: #856404;
        padding: 10px;
        border-radius: 4px;
        margin-bottom: 15px;
    }
    
    .btn-primary {
        background-color: #2c5aa0;
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        width: 100%;
        margin-top: 20px;
    }
    
    .btn-primary:hover {
        background-color: #1e3d6f;
    }
    
    .btn-primary:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }

    .btn-secondary {
        background: white;
        color: #2c5aa0;
        padding: 10px 20px;
        border: 2px solid #2c5aa0;
        border-radius: 4px;
        text-decoration: none;
        display: inline-block;
        margin: 5px;
        cursor: pointer;
    }

    .btn-secondary:hover {
        background: #2c5aa0;
        color: white;
    }
    
    .loading {
        display: none;
        text-align: center;
        margin: 20px 0;
    }
    
    .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #2c5aa0;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 2s linear infinite;
        margin: 0 auto;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .completion-success {
        display: none;
        text-align: center;
        padding: 40px;
        background-color: #e8f5e8;
        border-radius: 8px;
        margin-top: 20px;
    }
    
    .completion-success h2 {
        color: #2e7d32;
        margin-bottom: 15px;
    }
</style>

<div class="agreement-form">
    <div class="agreement-header">
        <h1>Agreement Completion</h1>
        <div class="agreement-id" id="agreement-id-display">
            Loading Agreement ID...
        </div>
        <p>Please complete the following information to finalize your agreement.</p>
    </div>

    <div id="form-container">
        <!-- Agreement Review Section -->
        <div class="form-section" style="background: #fafafa;">
            <h3>ðŸ“„ Review Agreement</h3>
            <div style="background: #e3f2fd; border: 1px solid #2196f3; color: #1565c0; padding: 10px; border-radius: 4px; margin-bottom: 15px;">
                <strong>Important:</strong> Please review the agreement terms below before completing this form.
            </div>

            <div style="text-align: center; margin: 15px 0;">
                <a href="#" class="btn-secondary" onclick="toggleAgreementText(); return false;">
                    ðŸ“– Read Agreement Terms
                </a>
            </div>

            <!-- HTML Agreement Text - Populated Dynamically -->
            <div id="agreement-text" style="display: none; background: white; padding: 20px; border-radius: 4px; max-height: 400px; overflow-y: auto; line-height: 1.6; margin-top: 10px; border: 1px solid #ddd;">
                <!-- Content loaded by JavaScript based on agreement type -->
            </div>
        </div>

        <form id="agreement-completion-form">
            <!-- Company Information Section -->
            <div class="form-section">
                <h3>Company Information</h3>
                
                <div class="form-group">
                    <label for="company-name">Legal Company Name <span class="required">*</span></label>
                    <input type="text" id="company-name" name="companyName" class="form-control" required>
                    <div class="error-message" id="company-name-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="company-type">Company Type</label>
                    <select id="company-type" name="companyType" class="form-control">
                        <option value="">Select company type (optional)</option>
                        <option value="Corporation">Corporation</option>
                        <option value="LLC">LLC</option>
                        <option value="Partnership">Partnership</option>
                        <option value="Sole Proprietorship">Sole Proprietorship</option>
                        <option value="Non-Profit">Non-Profit</option>
                        <option value="Other">Other</option>
                    </select>
                    <div class="error-message" id="company-type-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="business-address">Business Address <span class="required">*</span></label>
                    <textarea id="business-address" name="businessAddress" class="form-control" 
                              rows="3" required></textarea>
                    <div class="error-message" id="business-address-error"></div>
                </div>
            </div>

            <!-- Contact Information Section -->
            <div class="form-section">
                <h3>Authorized Representative</h3>
                
                <div class="form-group">
                    <label for="signatory-name">Authorized Signatory Name <span class="required">*</span></label>
                    <input type="text" id="signatory-name" name="signatoryName" class="form-control" required>
                    <div class="error-message" id="signatory-name-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="signatory-title">Title/Position <span class="required">*</span></label>
                    <input type="text" id="signatory-title" name="signatoryTitle" class="form-control" required>
                    <div class="error-message" id="signatory-title-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="work-email">Work Email Address <span class="required">*</span></label>
                    <input type="email" id="work-email" name="workEmail" class="form-control" required>
                    <div class="warning-message">
                        <strong>Work Email Required:</strong> Please use your company email address. 
                        Generic email providers (Gmail, Yahoo, etc.) are not accepted.
                    </div>
                    <div class="error-message" id="work-email-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="phone-number">Phone Number</label>
                    <input type="tel" id="phone-number" name="phoneNumber" class="form-control">
                    <div class="error-message" id="phone-number-error"></div>
                </div>
            </div>

            <!-- Agreement Specific Fields (Dynamic based on agreement type) -->
            <div class="form-section" id="agreement-specific-section">
                <h3>Agreement Details</h3>
                <div id="dynamic-fields">
                    <!-- Fields populated dynamically based on agreement type -->
                </div>
            </div>

            <!-- Legal Acceptance Section -->
            <div class="form-section">
                <h3>Legal Acceptance</h3>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="terms-agreement" name="termsAgreement" required>
                        <span class="required">*</span> I have read, understood, and agree to all terms and conditions of this agreement.
                    </label>
                    <div class="error-message" id="terms-agreement-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="digital-signature">Digital Signature (Type Full Name) <span class="required">*</span></label>
                    <input type="text" id="digital-signature" name="digitalSignature" class="form-control" 
                           placeholder="Type your full legal name" required>
                    <div class="error-message" id="digital-signature-error"></div>
                    <small style="color: #666;">By typing your name, you are providing a legal digital signature.</small>
                </div>
            </div>

            <button type="submit" class="btn-primary" id="submit-btn">
                Complete Agreement
            </button>
        </form>
    </div>

    <div class="loading" id="loading-indicator">
        <div class="spinner"></div>
        <p>Processing your agreement...</p>
    </div>

    <div class="completion-success" id="completion-success">
        <h2>âœ… Agreement Successfully Completed!</h2>
        <p>Thank you for completing your agreement!</p>
        <p><strong>Agreement ID:</strong> <span id="completed-agreement-id"></span></p>
        
        <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0;">
            <strong>ðŸ“§ Next Steps:</strong>
            <p style="margin: 5px 0 0 0;">The executed agreement PDF is being generated and will be emailed to all parties within the next few minutes. Please check your email.</p>
        </div>
        
        <p style="margin-top: 20px; color: #666;">
            You will receive the final signed agreement at: <strong id="user-email"></strong>
        </p>
    </div>
</div>

<script>
    // Configuration - Replace with your actual API endpoints
    const CONFIG = {
        API_BASE_URL: 'https://7eb27a1e3f99e66a8ae45a9d8ca269.15.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/f22ee6457eb84ca3a32e3f970a3150be/triggers/manual/paths/invoke?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=sCEtdfiLOS_Ull_JD6DG12B23XJinjCk77mXDy8qUIA',
        API_KEY: '',
        COMPANY_NAME: 'T-Mobile'
    };

    // Work email validation
    const GENERIC_DOMAINS = [
        'gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com', 
        'aol.com', 'icloud.com', 'live.com', 'msn.com',
        'comcast.net', 'verizon.net', 'att.net', 'cox.net',
        'protonmail.com', 'mail.com', 'yandex.com'
    ];

    // Global variables
    let agreementData = {};
    let agreementId = '';
    let securityToken = '';
    let agreementType = '';

    // Initialize form when page loads
    document.addEventListener('DOMContentLoaded', function() {
        initializeForm();
        setupValidation();
        setupFormSubmission();
    });


// Initialize form with URL parameters
function initializeForm() {
    // Extract agreement ID and token from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    agreementId = urlParams.get('id') || urlParams.get('agreement');
    securityToken = urlParams.get('token');
    agreementType = urlParams.get('type') || 'NDA';
    
    // Validate both agreement ID and token are present
    if (!agreementId || !securityToken) {
        showInvalidAccessError();
        return;
    }

    // Validate agreement ID format (flexible for NDA-, AGR-, etc.)
    if (!/^[A-Z]+-\d{4}-\d{4}-[A-Z0-9]{4}$/.test(agreementId)) {
        showInvalidAccessError();
        return;
    }

    // Validate token format (GUID with hyphens OR 32-char alphanumeric)
    const isValidGUID = /^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/i.test(securityToken);
    const isValid32Char = /^[A-Za-z0-9]{32}$/.test(securityToken);
    
    if (!isValidGUID && !isValid32Char) {
        showInvalidAccessError();
        return;
    }

    // Display agreement ID
    document.getElementById('agreement-id-display').textContent = agreementId;
    
    // Load agreement text based on type
    loadAgreementText(agreementType);
    
    // Load agreement data with token validation
    loadAgreementData(agreementId, securityToken);
}

    // Load agreement text based on type
    function loadAgreementText(type) {
        const container = document.getElementById('agreement-text');
        
        switch(type) {
            case 'NDA':
            case 'Mutual NDA':
                container.innerHTML = getNDAContent();
                break;
            case 'Company Hub Agreement':
                container.innerHTML = getPlaceholderContent('Company Hub Agreement');
                break;
            case 'Employee Hub Agreement':
                container.innerHTML = getPlaceholderContent('Employee Hub Agreement');
                break;
            default:
                container.innerHTML = getPlaceholderContent('Agreement');
        }
    }

    // NDA Agreement Content
    function getNDAContent() {
        return `
            <h4>NON-DISCLOSURE AGREEMENT</h4>
            <p><strong>Agreement ID:</strong> ${agreementId}</p>
            <p><strong>Effective Date:</strong> Upon execution by all parties</p>

            <h4>1. PARTIES</h4>
            <p>This Agreement is entered into between:</p>
            <ul>
                <li><strong>T-Mobile</strong> ("Disclosing Party")</li>
                <li><strong>Your Company</strong> ("Receiving Party") - [To be completed below]</li>
            </ul>

            <h4>2. PURPOSE</h4>
            <p>The parties wish to explore a business opportunity of mutual interest and in connection with this opportunity, 
            Disclosing Party may share certain confidential technical and business information which the Receiving Party is 
            obligated to keep confidential.</p>

            <h4>3. DEFINITION OF CONFIDENTIAL INFORMATION</h4>
            <p>For purposes of this Agreement, "Confidential Information" means all information or material that has or could have 
            commercial value or other utility in the business in which Disclosing Party is engaged.</p>

            <h4>4. OBLIGATIONS OF RECEIVING PARTY</h4>
            <p>Receiving Party agrees to:</p>
            <ol>
                <li>Hold and maintain the Confidential Information in strictest confidence</li>
                <li>Not disclose the Confidential Information to any third parties</li>
                <li>Not use the Confidential Information except for evaluating the business opportunity</li>
            </ol>

            <h4>5. TERM</h4>
            <p>This Agreement and Receiving Party's obligations shall commence on the Effective Date and continue for a period of 
            three (3) years from the date of disclosure of any Confidential Information.</p>

            <h4>6. RETURN OF MATERIALS</h4>
            <p>Upon request by Disclosing Party, Receiving Party shall promptly return all materials containing Confidential 
            Information or certify destruction of such materials.</p>

            <h4>7. NO LICENSE</h4>
            <p>Nothing in this Agreement grants any rights to Receiving Party in or to the Confidential Information, except as 
            expressly stated herein.</p>

            <h4>8. GOVERNING LAW</h4>
            <p>This Agreement shall be governed by the laws of the State of Washington, without regard to conflict of law principles.</p>

            <h4>9. ENTIRE AGREEMENT</h4>
            <p>This Agreement constitutes the entire agreement between the parties and supersedes all prior understandings 
            and agreements, whether written or oral.</p>

            <h4>10. SIGNATURES</h4>
            <p>By completing and submitting this form, the authorized representative of Receiving Party agrees to be bound 
            by all terms and conditions set forth in this Agreement.</p>
        `;
    }

    // Placeholder for agreements without text yet
    function getPlaceholderContent(agreementName) {
        return `
            <h4>${agreementName.toUpperCase()}</h4>
            <p><strong>Agreement ID:</strong> ${agreementId}</p>
            
            <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 4px; margin: 20px 0;">
                <p><strong>Note:</strong> The full agreement text will be provided to you via email after submission.</p>
                <p>By completing this form, you agree to the ${agreementName} terms as discussed with the T-Mobile Innovation team.</p>
            </div>

            <p>The executed agreement document will be sent to all parties upon completion.</p>
        `;
    }

    // Toggle agreement text view
    function toggleAgreementText() {
        const textDiv = document.getElementById('agreement-text');
        
        if (textDiv.style.display === 'none') {
            textDiv.style.display = 'block';
            textDiv.scrollTop = 0;
        } else {
            textDiv.style.display = 'none';
        }
    }

    // Load pre-filled agreement data with token validation
    async function loadAgreementData(id, token) {
        try {
            // For now, just populate the form with agreement type
            // In production, you'd call your API to validate token and get pre-filled data
            populateForm({ agreementType: agreementType });
        } catch (error) {
            console.error('Error loading agreement data:', error);
            showInvalidAccessError();
        }
    }

    // Show invalid access error (generic message for security)
    function showInvalidAccessError() {
        document.getElementById('form-container').innerHTML = `
            <div style="text-align: center; padding: 40px; background-color: #ffebee; border-radius: 8px; margin-top: 20px;">
                <h2 style="color: #d32f2f; margin-bottom: 15px;">Access Not Available</h2>
                <p style="color: #666; margin-bottom: 15px;">
                    This agreement completion link is not valid or has expired.
                </p>
                <p style="color: #666; font-size: 14px;">
                    If you believe this is an error, please contact the person who sent you this link.
                </p>
            </div>
        `;
        
        // Hide other page elements
        document.getElementById('agreement-id-display').textContent = 'Invalid Access';
    }

// Populate form with pre-filled data
function populateForm(data) {
    // Get URL parameters for pre-fill
    const urlParams = new URLSearchParams(window.location.search);
    
    // Pre-fill company name
    const companyName = urlParams.get('companyName') || data.companyName;
    if (companyName) {
        document.getElementById('company-name').value = decodeURIComponent(companyName);
    }
    
    // Pre-fill signatory name
    const contactName = urlParams.get('contactName') || data.contactName;
    if (contactName) {
        document.getElementById('signatory-name').value = decodeURIComponent(contactName);
    }
    
    // Pre-fill work email
    const contactEmail = urlParams.get('contactEmail') || data.contactEmail;
    if (contactEmail) {
        document.getElementById('work-email').value = decodeURIComponent(contactEmail);
    }

    // Add dynamic fields based on agreement type
    if (data.agreementType) {
        addDynamicFields(data.agreementType, data.dynamicFields || {});
    }
}
        // Pre-fill company name if available
        if (data.companyName) {
            document.getElementById('company-name').value = data.companyName;
        }

        // Add dynamic fields based on agreement type
        if (data.agreementType) {
            addDynamicFields(data.agreementType, data.dynamicFields || {});
        }
    }

    // Add agreement-specific dynamic fields
    function addDynamicFields(agreementType, fieldData) {
        const container = document.getElementById('dynamic-fields');
        
        switch (agreementType) {
            case 'Service Agreement':
                container.innerHTML = `
                    <div class="form-group">
                        <label for="service-rate">Hourly Rate (USD)</label>
                        <input type="number" id="service-rate" name="serviceRate" 
                               class="form-control" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="service-description">Service Description</label>
                        <textarea id="service-description" name="serviceDescription" 
                                 class="form-control" rows="3"></textarea>
                    </div>
                `;
                break;
                
            case 'NDA':
            case 'Mutual NDA':
                container.innerHTML = `
                    <p>Standard NDA terms apply as outlined in the agreement text above.</p>
                `;
                break;
                
            default:
                container.innerHTML = '<p>Standard agreement terms apply.</p>';
        }
    }

    // Setup form validation
    function setupValidation() {
        // Real-time email validation
        document.getElementById('work-email').addEventListener('blur', function() {
            validateWorkEmail(this.value, 'work-email');
        });

        // Digital signature validation
        document.getElementById('digital-signature').addEventListener('input', function() {
            validateDigitalSignature();
        });
    }

    // Validate work email domain
    function validateWorkEmail(email, fieldId) {
        const field = document.getElementById(fieldId);
        const errorDiv = document.getElementById(fieldId + '-error');
        
        if (!email) {
            return false;
        }

        // Basic email format check
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            showFieldError(field, errorDiv, 'Please enter a valid email address.');
            return false;
        }

        // Check for generic domains
        const domain = email.split('@')[1].toLowerCase();
        if (GENERIC_DOMAINS.includes(domain)) {
            showFieldError(field, errorDiv, 'Please use your work email address. Generic email providers are not accepted.');
            return false;
        }

        // Check for temporary email patterns
        if (domain.includes('tempmail') || domain.includes('disposable')) {
            showFieldError(field, errorDiv, 'Temporary email addresses are not permitted.');
            return false;
        }

        clearFieldError(field, errorDiv);
        return true;
    }

    // Validate digital signature matches signatory name
    function validateDigitalSignature() {
        const signatoryName = document.getElementById('signatory-name').value;
        const digitalSignature = document.getElementById('digital-signature').value;
        const field = document.getElementById('digital-signature');
        const errorDiv = document.getElementById('digital-signature-error');

        if (signatoryName && digitalSignature && signatoryName.toLowerCase() !== digitalSignature.toLowerCase()) {
            showFieldError(field, errorDiv, 'Digital signature must match the signatory name exactly.');
            return false;
        }

        clearFieldError(field, errorDiv);
        return true;
    }

    // Show field error
    function showFieldError(field, errorDiv, message) {
        field.classList.add('error');
        errorDiv.textContent = message;
        errorDiv.style.display = 'block';
    }

    // Clear field error
    function clearFieldError(field, errorDiv) {
        field.classList.remove('error');
        errorDiv.style.display = 'none';
    }

    // Setup form submission
    function setupFormSubmission() {
        document.getElementById('agreement-completion-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (await validateAndSubmitForm()) {
                // Form submitted successfully
            } else {
                // Validation failed
                alert('Please correct the errors above and try again.');
            }
        });
    }

    // Validate and submit form
    async function validateAndSubmitForm() {
        // Validate all required fields
        const isValid = validateAllFields();
        
        if (!isValid) {
            return false;
        }

        // Show loading indicator
        document.getElementById('form-container').style.display = 'none';
        document.getElementById('loading-indicator').style.display = 'block';

        try {
            // Collect form data
            const formData = collectFormData();
            
            // Submit to API
            const response = await submitAgreement(formData);
            
            if (response.success) {
                showCompletionSuccess(response.data);
                return true;
            } else {
                throw new Error(response.error || 'Submission failed');
            }
        } catch (error) {
            console.error('Submission error:', error);
            alert('Failed to submit agreement. Please try again or contact support.');
            
            // Hide loading and show form again
            document.getElementById('loading-indicator').style.display = 'none';
            document.getElementById('form-container').style.display = 'block';
            
            return false;
        }
    }

    // Validate all form fields
    function validateAllFields() {
        let isValid = true;
        
        // Validate work email
        const workEmail = document.getElementById('work-email').value;
        if (!validateWorkEmail(workEmail, 'work-email')) {
            isValid = false;
        }
        
        // Validate digital signature
        if (!validateDigitalSignature()) {
            isValid = false;
        }
        
        // Validate terms agreement
        if (!document.getElementById('terms-agreement').checked) {
            alert('You must agree to the terms and conditions.');
            isValid = false;
        }
        
        return isValid;
    }

    // Collect form data
    function collectFormData() {
        const form = document.getElementById('agreement-completion-form');
        const formData = new FormData(form);
        
        const data = {
            agreementId: agreementId,
            securityToken: securityToken,
            companyName: formData.get('companyName'),
            companyType: formData.get('companyType'),
            businessAddress: formData.get('businessAddress'),
            signatoryName: formData.get('signatoryName'),
            signatoryTitle: formData.get('signatoryTitle'),
            workEmail: formData.get('workEmail'),
            phoneNumber: formData.get('phoneNumber'),
            digitalSignature: formData.get('digitalSignature'),
            termsAgreement: formData.get('termsAgreement') ? true : false,
            completionTimestamp: new Date().toISOString(),
            ipAddress: '', // Will be captured server-side
            userAgent: navigator.userAgent
        };

        // Add dynamic fields based on agreement type
        if (document.getElementById('service-rate')) {
            data.serviceRate = formData.get('serviceRate');
            data.serviceDescription = formData.get('serviceDescription');
        }

        return data;
    }

    // Submit agreement to API
    async function submitAgreement(formData) {
        const response = await fetch(CONFIG.API_BASE_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        });

        return await response.json();
    }

    // Show completion success
    function showCompletionSuccess(responseData) {
        document.getElementById('loading-indicator').style.display = 'none';
        document.getElementById('completed-agreement-id').textContent = agreementId;
        
        // Show user's email
        const userEmail = document.getElementById('work-email').value;
        document.getElementById('user-email').textContent = userEmail;
        
        document.getElementById('completion-success').style.display = 'block';
        
        // Scroll to success message
        document.getElementById('completion-success').scrollIntoView({ behavior: 'smooth' });
    }
</script>
</body>
</html>
